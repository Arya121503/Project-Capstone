// Dashboard User Assets Managementclass DashboardUserAssets {    constructor() {        this.currentPage = 1;        this.totalPages = 1;        this.assetsPerPage = 10;        this.mockData = [            {                id: 1,                name: "Tanah Komersial Strategis",                asset_type: "tanah",                alamat: "Jl. Dharmasada No. 123, Gubeng",                kecamatan: "Gubeng",                luas_tanah: 500,                harga_sewa: 15000000,                status: "Tersedia"            },            {                id: 2,                name: "Bangunan Kantor Modern",                asset_type: "bangunan",                alamat: "Jl. Basuki Rahmat No. 45, Tegalsari",                kecamatan: "Tegalsari",                luas_bangunan: 600,                kamar_tidur: 0,                kamar_mandi: 4,                harga_sewa: 35000000,                status: "Tersedia"            },            {                id: 3,                name: "Tanah Perumahan",                asset_type: "tanah",                kecamatan: "Rungkut",                alamat: "Jl. Rungkut Asri No. 78, Rungkut",                luas_tanah: 300,                harga_sewa: 8000000,                status: "Tersedia"            }        ];        this.init();    }    init() {        this.setupEventListeners();        this.loadAvailableAssets();    }    setupEventListeners() {        // Tab switching        document.addEventListener('click', (e) => {            if (e.target.closest('a[data-bs-toggle="tab"]')) {                const tabId = e.target.getAttribute('href');                if (tabId === '#tersedia-aset') {                    this.loadAvailableAssets();                } else if (tabId === '#favorit-aset') {                    this.loadFavoriteAssets();                }            }        });    }    showErrorMessage(message) {        const alertContainer = document.getElementById("alertContainer");        if (alertContainer) {            alertContainer.innerHTML = `                <div class="alert alert-warning alert-dismissible fade show" role="alert">                    <i class="fas fa-exclamation-triangle me-2"></i>                    ${message}                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>                </div>            `;        }    }    loadAvailableAssets() {        // Get all available assets        const container = document.getElementById("assetGrid");        if (!container) {            return;        }        // Create mock data display        this.displayAssets(this.mockData);                // Update pagination        this.updatePagination({            current_page: 1,            total_pages: 1,            has_prev: false,            has_next: false        });    }    loadFavoriteAssets() {        // Load favorite status for displayed assets        const favoriteHearts = document.querySelectorAll('.favorite-heart');        const assetIds = Array.from(favoriteHearts).map(heart => heart.getAttribute('data-asset-id'));                // Check if we have any hearts to update        if (favoriteHearts.length === 0) {            return;        }        // Check favorite status for all assets at once        fetch('/api/favorites/check-multiple', {            method: 'POST',            headers: {                'Content-Type': 'application/json'            },            body: JSON.stringify({ asset_ids: assetIds })        })        .then(response => response.json())        .then(data => {            if (data.success && data.favorites) {                // Update each heart based on favorite status                favoriteHearts.forEach(heart => {                    const assetId = parseInt(heart.getAttribute('data-asset-id'));                    const isFavorited = data.favorites.includes(assetId);                                        // Update heart status                    if (isFavorited) {                        heart.classList.add('favorited');                    } else {                        heart.classList.remove('favorited');                    }                });            }        })        .catch(error => {            console.error('Error checking favorite status:', error);        });    }    toggleFavorite(assetId, element) {        // Check if already favorited        const isFavorited = element.classList.contains('favorited');        const endpoint = isFavorited ? '/api/favorites/remove' : '/api/favorites/add';                // Call API to update favorite status        fetch(endpoint, {            method: 'POST',            headers: {                'Content-Type': 'application/json'            },            body: JSON.stringify({                asset_id: assetId,                asset_type: 'rental',                asset_source: 'rental_assets'            })        })        .then(response => response.json())        .then(data => {            if (data.success) {                // Update UI                if (isFavorited) {                    element.classList.remove('favorited');                } else {                    element.classList.add('favorited');                }                                // Add pulse animation                element.classList.add('pulse');                setTimeout(() => {                    element.classList.remove('pulse');                }, 500);            }        })        .catch(error => {            console.error('Error toggling favorite:', error);        });    }    displayAssets(assets) {        const container = document.getElementById("assetGrid");        if (!container) return;        if (assets.length === 0) {            container.innerHTML = `                <div class="col-12">                    <div class="text-center p-4">                        <i class="fas fa-home fa-3x text-muted mb-3"></i>                        <h5>Tidak ada aset tersedia</h5>                        <p class="text-muted">Belum ada aset yang tersedia untuk disewa saat ini.</p>                    </div>                </div>            `;            return;        }        let html = '';        assets.forEach(asset => {            html += this.createAssetCard(asset);        });        container.innerHTML = html;    }    createAssetCard(asset) {        return `            <div class="col-md-6 col-lg-4 mb-4">                <div class="card h-100 shadow-sm">                    <div class="card-body">                        <div class="d-flex justify-content-between align-items-start mb-2">                            <h6 class="card-title">${asset.name}</h6>                            <i class="fas fa-heart favorite-heart"                                data-asset-id="${asset.id}"                                onclick="dashboardUserAssets.toggleFavorite(${asset.id}, this)"></i>                        </div>                        <p class="card-text text-muted small">                            <i class="fas fa-map-marker-alt me-1"></i>                            ${asset.alamat}                        </p>                        <div class="mb-2">                            <span class="badge bg-primary">${this.getAssetTypeBadge(asset.asset_type)}</span>                            <span class="badge bg-success">${asset.status}</span>                        </div>                        <div class="price-info">                            <strong class="text-primary">Rp ${this.formatCurrency(asset.harga_sewa)}/bulan</strong>                        </div>                    </div>                    <div class="card-footer bg-transparent">                        <div class="d-flex gap-2">                            <button class="btn btn-outline-primary btn-sm flex-fill"                                     onclick="showAsetDetail(${asset.id})">                                <i class="fas fa-eye me-1"></i>Detail                            </button>                            <button class="btn btn-primary btn-sm flex-fill"                                     onclick="showRentalForm(${asset.id}, '${asset.asset_type}')">                                <i class="fas fa-file-contract me-1"></i>Sewa                            </button>                        </div>                    </div>                </div>            </div>        `;    }    getAssetTypeBadge(assetType) {        if (assetType === 'tanah' || assetType === '3') {            return 'Tanah';        } else {            return 'Bangunan';        }    }    formatCurrency(amount) {        return new Intl.NumberFormat('id-ID').format(amount);    }    updatePagination(paginationData) {        // Update pagination UI        this.currentPage = paginationData.current_page;        this.totalPages = paginationData.total_pages;    }    updateDashboardStats(type) {        if (type === 'favoriteCount') {            // Update favorite count in dashboard        }    }}// Show asset detail modalfunction showAsetDetail(assetId) {    // Remove existing modal if any    const existingModal = document.getElementById('asetDetailModal');    if (existingModal) {        existingModal.remove();    }    // Redirect to rental form page    window.location.href = `/rental/form/${assetId}`;}// Show rental formfunction showRentalForm(assetId, assetType) {    // Redirect to rental form page    window.location.href = `/rental/form/${assetId}`;}// Initialize dashboard user assetslet dashboardUserAssets;document.addEventListener('DOMContentLoaded', function() {    dashboardUserAssets = new DashboardUserAssets();});