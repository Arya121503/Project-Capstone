<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebook Charts Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .card { margin-bottom: 20px; }
        .card-body { min-height: 250px; }
        canvas { max-height: 200px; }
    </style>>
</head>
<body>
    <div class="container mt-4">
        <h2>Test Notebook Charts</h2>
        
        <div class="card shadow-sm border-0">
            <div class="card-header bg-gradient" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h5 class="mb-0" style="display: flex !important; align-items: center !important; flex-direction: row !important; gap: 0.5rem !important;">
                    <i class="fas fa-flask me-2"></i>
                    Analisis Data Real dari Jupyter Notebook
                    <span class="badge bg-light text-dark ms-2">2,000 Properties Analyzed</span>
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- Real Property Distribution -->
                    <div class="col-md-3">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-info text-white text-center">
                                <h6 class="mb-0">Distribusi Properti</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="notebookPropertyChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Kecamatan Analysis -->
                    <div class="col-md-5">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-success text-white text-center">
                                <h6 class="mb-0">Top Kecamatan (Real Data)</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="notebookKecamatanChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Price Distribution Analysis -->
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-warning text-dark text-center">
                                <h6 class="mb-0">Distribusi Range Harga</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="notebookPriceChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <!-- Revenue Projection -->
                    <div class="col-md-8">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-danger text-white text-center">
                                <h6 class="mb-0">Proyeksi Revenue Bulanan (Berdasarkan Analisis Real)</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="notebookRevenueChart" height="250"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Key Statistics from Notebook -->
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-secondary text-white text-center">
                                <h6 class="mb-0">Statistik Kunci</h6>
                            </div>
                            <div class="card-body">
                                <div class="row text-center">
                                    <div class="col-12 mb-3">
                                        <h5 class="text-primary">Rp 91.2M</h5>
                                        <small class="text-muted">Avg. Sewa Bangunan</small>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <h5 class="text-success">Rp 47.3M</h5>
                                        <small class="text-muted">Avg. Sewa Tanah</small>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <h5 class="text-warning">67</h5>
                                        <small class="text-muted">Properties di Genteng</small>
                                    </div>
                                    <div class="col-12">
                                        <h5 class="text-info">Rp 571M</h5>
                                        <small class="text-muted">Harga Maksimum</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-success mt-3">
                    <h6><i class="fas fa-info-circle me-2"></i>Info Analisis</h6>
                    <p class="mb-0">Data ini diambil langsung dari analisis Jupyter Notebook yang memproses 2,000 properti real dari dataset bangunan dan tanah Surabaya. Analisis mencakup distribusi harga, lokasi terpopuler, dan proyeksi revenue berdasarkan data historis.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Immediate Notebook Charts -->
    <script>
        // Inline JavaScript for immediate testing
        const NotebookCharts = {
            initialized: false,
            
            chartData: {
                property_distribution: {
                    labels: ["Bangunan", "Tanah"],
                    datasets: [{
                        data: [1000, 1000],
                        backgroundColor: ["#FF6B6B", "#4ECDC4"],
                        borderWidth: 2,
                        borderColor: "#ffffff"
                    }]
                },
                
                top_kecamatan: {
                    labels: ["Genteng", "Asemrowo", "Sukomanunggal", "Bubutan", "Bulak"],
                    datasets: [{
                        label: "Jumlah Properti",
                        data: [67, 65, 63, 61, 59],
                        backgroundColor: "#28a745",
                        borderWidth: 1,
                        borderColor: "#1e7e34"
                    }]
                },
                
                price_distribution: {
                    labels: ["< 20M", "20-50M", "50-100M", "100-200M", "> 200M"],
                    datasets: [{
                        label: "Jumlah Properti",
                        data: [680, 520, 420, 280, 100],
                        backgroundColor: ["#ffc107", "#fd7e14", "#dc3545", "#6f42c1", "#6610f2"],
                        borderWidth: 1
                    }]
                },
                
                revenue_projection: {
                    labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
                    datasets: [{
                        label: "Proyeksi Pendapatan (Miliar)",
                        data: [8.2, 9.1, 10.5, 11.2, 12.1, 11.8],
                        borderColor: "#dc3545",
                        backgroundColor: "rgba(220, 53, 69, 0.1)",
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                }
            },
            
            init: function() {
                console.log('ðŸš€ Starting notebook charts initialization...');
                console.log('ðŸ“Š Chart.js available:', typeof Chart !== 'undefined');
                
                const elements = ['notebookPropertyChart', 'notebookKecamatanChart', 'notebookPriceChart', 'notebookRevenueChart'];
                elements.forEach(id => {
                    const element = document.getElementById(id);
                    console.log(`ðŸ“Š ${id}:`, element ? 'found' : 'NOT FOUND');
                });
                
                try {
                    this.createPropertyChart();
                    this.createKecamatanChart();
                    this.createPriceChart();
                    this.createRevenueChart();
                    console.log('âœ… All charts created');
                } catch (error) {
                    console.error('âŒ Error:', error);
                }
            },
            
            createPropertyChart: function() {
                const ctx = document.getElementById('notebookPropertyChart');
                if (ctx) {
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: this.chartData.property_distribution,
                        options: { responsive: true, maintainAspectRatio: false }
                    });
                    console.log('âœ… Property chart created');
                }
            },
            
            createKecamatanChart: function() {
                const ctx = document.getElementById('notebookKecamatanChart');
                if (ctx) {
                    new Chart(ctx, {
                        type: 'bar',
                        data: this.chartData.top_kecamatan,
                        options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
                    });
                    console.log('âœ… Kecamatan chart created');
                }
            },
            
            createPriceChart: function() {
                const ctx = document.getElementById('notebookPriceChart');
                if (ctx) {
                    new Chart(ctx, {
                        type: 'bar',
                        data: this.chartData.price_distribution,
                        options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
                    });
                    console.log('âœ… Price chart created');
                }
            },
            
            createRevenueChart: function() {
                const ctx = document.getElementById('notebookRevenueChart');
                if (ctx) {
                    new Chart(ctx, {
                        type: 'line',
                        data: this.chartData.revenue_projection,
                        options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
                    });
                    console.log('âœ… Revenue chart created');
                }
            }
        };
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸš€ DOM ready, initializing charts...');
            setTimeout(() => NotebookCharts.init(), 100);
        });
    </script>
</body>
</html>
