# ğŸ“Š Railway Deployment Architecture

## Arsitektur Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GitHub Repository                       â”‚
â”‚                 Arya121503/Project-Capstone                  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Python     â”‚  â”‚    Flask     â”‚  â”‚  ML Models   â”‚      â”‚
â”‚  â”‚    Code      â”‚  â”‚    App       â”‚  â”‚   (.pkl)     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Auto-deploy on push
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Railway Platform                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Build Process                          â”‚    â”‚
â”‚  â”‚  1. Detect Python (runtime.txt)                     â”‚    â”‚
â”‚  â”‚  2. Install dependencies (requirements.txt)         â”‚    â”‚
â”‚  â”‚  3. Build with Nixpacks                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                 â”‚
â”‚                            â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Production Environment                       â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  Flask App       â”‚â—„â”€â”€â”€â”€â”€â–ºâ”‚  PostgreSQL DB   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  (Gunicorn)      â”‚      â”‚  (Railway)       â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  Port: 5000      â”‚      â”‚                  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚           â”‚                                         â”‚    â”‚
â”‚  â”‚           â–¼                                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚    â”‚
â”‚  â”‚  â”‚  Public URL      â”‚                              â”‚    â”‚
â”‚  â”‚  â”‚  HTTPS enabled   â”‚                              â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚      Users       â”‚
                  â”‚  Access via      â”‚
                  â”‚  Railway URL     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Flow

```
Developer                 GitHub                  Railway
    â”‚                        â”‚                        â”‚
    â”‚  1. git push          â”‚                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
    â”‚                        â”‚  2. webhook trigger   â”‚
    â”‚                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                        â”‚                        â”‚
    â”‚                        â”‚    3. clone repo      â”‚
    â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                        â”‚                        â”‚
    â”‚                        â”‚    4. build app       â”‚
    â”‚                        â”‚    - install deps      â”‚
    â”‚                        â”‚    - run tests         â”‚
    â”‚                        â”‚                        â”‚
    â”‚                        â”‚    5. deploy          â”‚
    â”‚                        â”‚    - start gunicorn    â”‚
    â”‚                        â”‚    - connect DB        â”‚
    â”‚                        â”‚                        â”‚
    â”‚                   6. deployment success        â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                        â”‚                        â”‚
    â”‚  7. access app URL     â”‚                        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                        â”‚                        â”‚
```

## File Structure untuk Deployment

```
Project-Capstone/
â”‚
â”œâ”€â”€ ğŸ”§ Railway Config Files
â”‚   â”œâ”€â”€ Procfile                 # Start command
â”‚   â”œâ”€â”€ railway.toml             # Railway settings
â”‚   â”œâ”€â”€ runtime.txt              # Python version
â”‚   â”œâ”€â”€ .railwayignore          # Exclude files
â”‚   â””â”€â”€ requirements.txt         # Dependencies
â”‚
â”œâ”€â”€ ğŸ“ Documentation
â”‚   â”œâ”€â”€ RAILWAY_DEPLOYMENT.md    # Full guide
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md       # Quick start
â”‚   â”œâ”€â”€ DEPLOYMENT_CHECKLIST.md  # Checklist
â”‚   â””â”€â”€ DEPLOYMENT_CHANGES.md    # What changed
â”‚
â”œâ”€â”€ ğŸ Application Code
â”‚   â”œâ”€â”€ run.py                   # Entry point
â”‚   â”œâ”€â”€ config.py               # Configuration
â”‚   â”œâ”€â”€ init_db.py              # DB initialization
â”‚   â””â”€â”€ app/                    # Flask app
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ routes.py
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ ğŸ” Environment
    â”œâ”€â”€ .env                     # Local (not committed)
    â”œâ”€â”€ .env.example            # Template
    â””â”€â”€ .env.railway            # Railway template
```

## Environment Variables Flow

```
Local Development              Railway Production
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

.env file:                    Railway Dashboard:
â”œâ”€â”€ SECRET_KEY=local          â”œâ”€â”€ SECRET_KEY=prod-key
â”œâ”€â”€ MYSQL_HOST=localhost      â”œâ”€â”€ FLASK_ENV=production
â”œâ”€â”€ MYSQL_USER=root           â””â”€â”€ (DATABASE_URL auto-set)
â””â”€â”€ ...                       

                              Railway Auto-generates:
                              â”œâ”€â”€ DATABASE_URL
                              â”œâ”€â”€ PORT
                              â”œâ”€â”€ RAILWAY_ENVIRONMENT
                              â””â”€â”€ ...
```

## Request Flow in Production

```
User Request
     â”‚
     â–¼
Railway Load Balancer
     â”‚
     â–¼
HTTPS (SSL/TLS)
     â”‚
     â–¼
Gunicorn (WSGI Server)
     â”‚
     â”œâ”€â–º Worker 1 â”€â”
     â”œâ”€â–º Worker 2 â”€â”¤
     â”œâ”€â–º Worker 3 â”€â”¼â”€â–º Flask App â”€â”€â–º PostgreSQL
     â””â”€â–º Worker 4 â”€â”˜
         â”‚
         â–¼
    Response
         â”‚
         â–¼
      User
```

## Database Migration Path

```
Development (Local)            Production (Railway)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

MySQL/SQLite                   PostgreSQL
     â”‚                              â”‚
     â”‚  1. Code uses               â”‚
     â”‚     SQLAlchemy              â”‚
     â”‚                             â”‚
     â”‚  2. Compatible              â”‚
     â”‚     with both               â”‚
     â”‚                             â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
              Same Models
              Same Queries
              No Code Change!
```

## Continuous Deployment

```
Code Change â†’ Push to GitHub â†’ Railway Detects â†’ Build â†’ Deploy â†’ Live
     â”‚              â”‚               â”‚              â”‚       â”‚      â”‚
     â”‚              â”‚               â”‚              â”‚       â”‚      â””â”€ Users see changes
     â”‚              â”‚               â”‚              â”‚       â””â”€ Health check
     â”‚              â”‚               â”‚              â””â”€ Run tests
     â”‚              â”‚               â””â”€ Install dependencies
     â”‚              â””â”€ Webhook triggered
     â””â”€ Local development

â±ï¸  Total time: ~2-5 minutes
```

## Monitoring & Logs

```
Railway Dashboard
     â”‚
     â”œâ”€â–º ğŸ“Š Metrics
     â”‚      â”œâ”€ CPU Usage
     â”‚      â”œâ”€ Memory Usage
     â”‚      â”œâ”€ Request Count
     â”‚      â””â”€ Response Time
     â”‚
     â”œâ”€â–º ğŸ“ Logs
     â”‚      â”œâ”€ Application Logs
     â”‚      â”œâ”€ Build Logs
     â”‚      â””â”€ Deploy Logs
     â”‚
     â”œâ”€â–º ğŸ’¾ Database
     â”‚      â”œâ”€ Connection Stats
     â”‚      â”œâ”€ Query Performance
     â”‚      â””â”€ Storage Usage
     â”‚
     â””â”€â–º âš™ï¸  Settings
            â”œâ”€ Environment Vars
            â”œâ”€ Domains
            â””â”€ Deployment Config
```

---

**Visual Guide**: Memudahkan pemahaman proses deployment Railway
